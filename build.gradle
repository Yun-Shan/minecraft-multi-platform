// copy outputs to root dir
tasks.register("build") {
    group = "build"
    dependsOn(":mod:fabric:build", ":mod:neoforge:build", ":plugin:build")
    inputs.dir("mod/fabric/build/libs")
    inputs.dir("mod/neoforge/build/libs")
    inputs.dir("plugin/build/libs")
    outputs.dir("build/libs")

    doLast {
        var files = inputs.files.files.stream().filter {
            !it.name.endsWith("-dev-shadow.jar") && !it.name.endsWith("-sources.jar")
        }.toList()
        copy {
            from(files)
            into("build/libs")
        }
    }
}

// clean outputs
tasks.register("clean") {
    group = "build"
    outputs.dir("build")

    doLast {
        delete "build"
    }
}